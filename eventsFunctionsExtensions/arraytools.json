{
  "author": "Arthur Pacaud (arthuro555)",
  "category": "",
  "extensionNamespace": "",
  "fullName": "Array tools",
  "helpPath": "",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWNvZGUtYXJyYXkiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMyw1QTIsMiAwIDAsMSA1LDNIMTlBMiwyIDAgMCwxIDIxLDVWMTlBMiwyIDAgMCwxIDE5LDIxSDVDMy44OSwyMSAzLDIwLjEgMywxOVY1TTYsNlYxOEgxMFYxNkg4VjhIMTBWNkg2TTE2LDE2SDE0VjE4SDE4VjZIMTRWOEgxNlYxNloiIC8+PC9zdmc+",
  "name": "ArrayTools",
  "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/code-array.svg",
  "shortDescription": "A collection of utilities and tools for working with arrays.",
  "version": "1.0.0",
  "description": [
    "> Note: This extension is currently made in JavaScript instead of the event sheet as variables cannot be passed to events based functions yet. Due to this hack, the extension **only works on root scene variables**, not on child variables or non-scene variables.",
    "",
    "This extension adds features like:",
    "- Combining arrays (concatenate into new array, append all children to another array)",
    "- Finding a value in an array (find index expression, contains condition)",
    "- Reversing arrays",
    "- Get a portion of an array (slice)",
    "- Add and remove lots of children at specific indices at once (fill, splice, shift, pop, add at index)",
    "- Randomness (shuffle children, get a random child)",
    "- Mathematical operations using arrays (sum of all numbers, biggest/smallest number, average number, median number)",
    "- Sort numbers in an array",
    "- String inter-operation (split string into array, join array array children to string)"
  ],
  "origin": {
    "identifier": "ArrayTools",
    "name": "gdevelop-extension-store"
  },
  "tags": [
    "array",
    "variable",
    "index",
    "tool",
    "math",
    "string",
    "sort",
    "find",
    "slice",
    "cut",
    "random",
    "copy",
    "combine",
    "concat",
    "append",
    "insert"
  ],
  "authorIds": [
    "ZgrsWuRTAkXgeuPV9bo0zuEcA2w1"
  ],
  "dependencies": [],
  "eventsFunctions": [
    {
      "description": "The index of the first variable that equals to a specific number in an array.",
      "fullName": "Index of number",
      "functionType": "Expression",
      "name": "IndexOf",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const num = eventsFunctionContext.getArgument(\"num\");",
            "const arr = runtimeScene",
            "    .getVariables()",
            "    .get(eventsFunctionContext.getArgument(\"array\"))",
            "    .getAllChildrenArray();",
            "",
            "// Technically findIndex would be more suitable but it may be a bit too recent and unsupported by some browsers",
            "eventsFunctionContext.returnValue = arr.indexOf(arr.find(variable => variable.getAsNumber() === num));",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The name of the scene array variable",
          "name": "array",
          "type": "string"
        },
        {
          "description": "The number to search in the array",
          "name": "num",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "The index of the first variable that equals to a specific text in an array.",
      "fullName": "Index of text",
      "functionType": "Expression",
      "name": "IndexOfStr",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const str = eventsFunctionContext.getArgument(\"str\");",
            "const arr = runtimeScene",
            "    .getVariables()",
            "    .get(eventsFunctionContext.getArgument(\"array\"))",
            "    .getAllChildrenArray();",
            "",
            "// Technically findIndex would be more suitable but it may be a bit too recent and unsupported by some browsers",
            "eventsFunctionContext.returnValue = arr.indexOf(arr.find(variable => variable.getAsString() === str));",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The name of the scene array variable",
          "name": "array",
          "type": "string"
        },
        {
          "description": "The string to search in the array",
          "name": "str",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "The index of the last variable that equals to a specific number in an array.",
      "fullName": "Last index of number",
      "functionType": "Expression",
      "name": "LastIndexOf",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const num = eventsFunctionContext.getArgument(\"num\");",
            "const arr = runtimeScene",
            "    .getVariables()",
            "    .get(eventsFunctionContext.getArgument(\"array\"))",
            "    .getAllChildrenArray();",
            "",
            "// Technically findIndex would be more suitable but it may be a bit too recent and unsupported by some browsers",
            "eventsFunctionContext.returnValue = arr.indexOf(arr.slice().reverse().find(variable => variable.getAsNumber() === num));",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The name of the scene array variable",
          "name": "array",
          "type": "string"
        },
        {
          "description": "The number to search in the array",
          "name": "num",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "The index of the last variable that equals to a specific text in an array.",
      "fullName": "Last index of text",
      "functionType": "Expression",
      "name": "LastIndexOfStr",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const str = eventsFunctionContext.getArgument(\"str\");",
            "const arr = runtimeScene",
            "    .getVariables()",
            "    .get(eventsFunctionContext.getArgument(\"array\"))",
            "    .getAllChildrenArray();",
            "",
            "// Technically findIndex would be more suitable but it may be a bit too recent and unsupported by some browsers",
            "eventsFunctionContext.returnValue = arr.indexOf(arr.slice().reverse().find(variable => variable.getAsString() === str));",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The name of the scene array variable",
          "name": "array",
          "type": "string"
        },
        {
          "description": "The string to search in the array",
          "name": "str",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Returns a random number of an array of numbers.",
      "fullName": "Random number of array",
      "functionType": "Expression",
      "name": "GetRandomNumber",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene",
            "    .getVariables()",
            "    .get(eventsFunctionContext.getArgument(\"arr\"))",
            "    .getAllChildrenArray();",
            "",
            "eventsFunctionContext.returnValue = arr.length === 0 ? 0 :",
            "    arr[Math.floor(Math.random() * arr.length)].getAsNumber();",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The name of the scene array variable",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Returns a random string of an array of strings.",
      "fullName": "Random string of array",
      "functionType": "StringExpression",
      "name": "GetRandomString",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene",
            "    .getVariables()",
            "    .get(eventsFunctionContext.getArgument(\"arr\"))",
            "    .getAllChildrenArray();",
            "",
            "eventsFunctionContext.returnValue = arr.length === 0 ? \"\" :",
            "    arr[Math.floor(Math.random() * arr.length)].getAsString();",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [
        {
          "description": "The name of the scene array variable",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Removes the last array child of an array, and return it as a number.",
      "fullName": "Pop number from array",
      "functionType": "Expression",
      "name": "PopNumber",
      "sentence": "Remove last child of _PARAM1_ and store it in _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "// Cast to array to ensure getAllChildrenArray returns the real array",
            "arr.castTo(\"array\");",
            "",
            "eventsFunctionContext.returnValue = arr.getAllChildrenArray().pop().getAsNumber();",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The array to pop a child from",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Removes the last array child of an array, and return it as a string.",
      "fullName": "Pop string from array",
      "functionType": "StringExpression",
      "name": "PopString",
      "sentence": "Remove last child of _PARAM1_ and store it in _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "// Cast to array to ensure getAllChildrenArray returns the real array",
            "arr.castTo(\"array\");",
            "",
            "eventsFunctionContext.returnValue = arr.getAllChildrenArray().pop().getAsString();",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [
        {
          "description": "The array to pop a child from",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Removes the first array child of an array, and return it as a number.",
      "fullName": "Shift number from array",
      "functionType": "Expression",
      "name": "ShiftNumber",
      "sentence": "Remove last child of _PARAM1_ and store it in _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "// Cast to array to ensure getAllChildrenArray returns the real array",
            "arr.castTo(\"array\");",
            "",
            "eventsFunctionContext.returnValue = arr.getAllChildrenArray().shift().getAsNumber();",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The array to shift a child from",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Removes the first array child of an array, and return it as a string.",
      "fullName": "Shift string from array",
      "functionType": "StringExpression",
      "name": "ShiftString",
      "sentence": "Remove last child of _PARAM1_ and store it in _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "// Cast to array to ensure getAllChildrenArray returns the real array",
            "arr.castTo(\"array\");",
            "",
            "eventsFunctionContext.returnValue = arr.getAllChildrenArray().shift().getAsString();",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [
        {
          "description": "The array to shift a child from",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Checks if an array contains a specific number.",
      "fullName": "Array has number",
      "functionType": "Condition",
      "name": "HasNumber",
      "sentence": "Array _PARAM1_ has number _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "Egal"
              },
              "parameters": [
                "ArrayTools::IndexOf(GetArgumentAsString(\"arr\"), GetArgumentAsNumber(\"val\"))",
                "!=",
                "-1"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "The array to check from",
          "name": "arr",
          "type": "string"
        },
        {
          "description": "The number to search",
          "name": "val",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Checks if an array contains a specific string.",
      "fullName": "Array has string",
      "functionType": "Condition",
      "name": "HasString",
      "sentence": "Array _PARAM1_ has string _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "Egal"
              },
              "parameters": [
                "ArrayTools::IndexOfStr(GetArgumentAsString(\"arr\"), GetArgumentAsString(\"val\"))",
                "!=",
                "-1"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "The array to check from",
          "name": "arr",
          "type": "string"
        },
        {
          "description": "The text to search",
          "name": "val",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Copies a portion of a scene array variable into a new scene array variable.",
      "fullName": "Slice an array",
      "functionType": "Action",
      "name": "Slice",
      "sentence": "Slice array _PARAM1_ from indices _PARAM3_ to _PARAM4_ into _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "const target = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"target\"));",
            "",
            "// Ensure the target is a clean new array",
            "target.castTo(\"array\");",
            "target.clearChildren();",
            "",
            "// Slice the original array",
            "const slice = arr",
            "    .getAllChildrenArray()",
            "    .slice(",
            "        eventsFunctionContext.getArgument(\"begin\"),",
            "        // The `|| undefined` replaces 0 with undefined, as having the argument as 0 ",
            "        // would make the array empty and is therefore useless.",
            "        // With undefined though, it doesn't stop until the end of the array,",
            "        // which is purposeful.",
            "        eventsFunctionContext.getArgument(\"end\") || undefined",
            "    );",
            "",
            "// Copy each variable of the slice into the new array",
            "for (const variable of slice)",
            "    target.pushVariableCopy(variable);",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The array to take a slice from",
          "name": "arr",
          "type": "string"
        },
        {
          "description": "The array to store the slice into",
          "name": "target",
          "type": "string"
        },
        {
          "description": "The index to start the slice from",
          "name": "begin",
          "type": "expression"
        },
        {
          "description": "The index to end the slice at",
          "longDescription": "Set to 0 to copy all of the array. If you use a negative value, the index will be selected beginning from the end.  \nFor example, slicing an array with 5 elements from 0 to -1 would take only elements from indices 0 to 3.",
          "name": "end",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Cuts a portion of an array off.",
      "fullName": "Splice an array",
      "functionType": "Action",
      "name": "Splice",
      "sentence": "Remove _PARAM3_ items from array _PARAM1_ starting from index _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "// Cast to array to ensure getAllChildrenArray returns the real array",
            "arr.castTo(\"array\");",
            "arr.getAllChildrenArray()",
            "    .splice(",
            "        eventsFunctionContext.getArgument(\"begin\"),",
            "        // Replaces 0 with the legth of the array, as having the argument as 0 ",
            "        // would not remove anything and is therefore useless.",
            "        eventsFunctionContext.getArgument(\"count\") || arr.getAllChildrenArray().length",
            "    );",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The array to remove items from",
          "name": "arr",
          "type": "string"
        },
        {
          "description": "The index to start removing from",
          "longDescription": "If you use a negative value, the index will be selected beginning from the end.",
          "name": "begin",
          "type": "expression"
        },
        {
          "description": "The amount of elements to remove",
          "longDescription": "Set to 0 to remove until the end of the array.",
          "name": "count",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Combines all elements of 2 scene arrays into one new scene array.",
      "fullName": "Combine 2 arrays",
      "functionType": "Action",
      "name": "Concatenate",
      "sentence": "Combine array _PARAM1_ and _PARAM2_ into _PARAM3_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "const arr2 = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr2\"));",
            "const target = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"target\"));",
            "",
            "// Ensure the target is a clean new array",
            "target.castTo(\"array\");",
            "target.clearChildren();",
            "",
            "// Copy both arrays inside the new one",
            "for (const variable of arr.getAllChildrenArray())",
            "    target.pushVariableCopy(variable);",
            "",
            "for (const variable of arr2.getAllChildrenArray())",
            "    target.pushVariableCopy(variable);",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The first array",
          "name": "arr",
          "type": "string"
        },
        {
          "description": "The second array",
          "name": "arr2",
          "type": "string"
        },
        {
          "description": "The variable to store the new array in",
          "name": "target",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Appends a copy of all variables of one array to another array.",
      "fullName": "Append all variable to another array",
      "functionType": "Action",
      "name": "AppendAll",
      "sentence": "Append all elements from array _PARAM1_ into _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "const target = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"target\"));",
            "",
            "// Copy both arrays inside the new one",
            "for (const variable of arr.getAllChildrenArray())",
            "    target.pushVariableCopy(variable);",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The array to get the variables from",
          "name": "arr",
          "type": "string"
        },
        {
          "description": "The variable to append the variables in",
          "name": "target",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Reverses children of an array. The first array child becomes the last, and the last array child becomes the first.",
      "fullName": "Reverse an array",
      "functionType": "Action",
      "name": "Reverse",
      "sentence": "Reverse array _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "// Cast to array to ensure getAllChildrenArray returns the real array",
            "arr.castTo(\"array\");",
            "arr.getAllChildrenArray().reverse();",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The array to reverse",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Fill an element with a number.",
      "fullName": "Fill array with number",
      "functionType": "Action",
      "name": "Fill",
      "sentence": "Fill array _PARAM1_ with _PARAM2_ from index _PARAM3_ to index _PARAM4_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "// Cast to array to ensure getAllChildrenArray returns the real array",
            "arr.castTo(\"array\");",
            "const a = arr.getAllChildrenArray();",
            "const end = eventsFunctionContext.getArgument(\"end\") || a.length - 1;",
            "",
            "for (let i = eventsFunctionContext.getArgument(\"begin\"); i <= end; i++)",
            "    a[i] = new gdjs.Variable({",
            "        type: \"number\",",
            "        value: eventsFunctionContext.getArgument(\"val\"),",
            "    });",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The array to fill",
          "name": "arr",
          "type": "string"
        },
        {
          "description": "The number to fill",
          "name": "val",
          "type": "expression"
        },
        {
          "description": "The index to start filling from",
          "name": "begin",
          "type": "expression"
        },
        {
          "description": "The index to stop filling at",
          "longDescription": "Set to 0 to fill until the end of the array.",
          "name": "end",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Shuffles all children of an array.",
      "fullName": "Shuffle array",
      "functionType": "Action",
      "name": "Shuffle",
      "sentence": "Shuffle array _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "// Cast to array to ensure getAllChildrenArray returns the real array",
            "arr.castTo(\"array\");",
            "const a = arr.getAllChildrenArray();",
            "a.sort(() => Math.random() - 0.5);",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The array to shuffle",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Replaces all arrays inside of an array with their children. For example, [[1,2], [3,4]] becomes [1,2,3,4].",
      "fullName": "Flatten array",
      "functionType": "Action",
      "name": "Flatten",
      "sentence": "Flatten array _PARAM1_ (Deeply flatten: _PARAM2_)",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "// Cast to array to ensure getAllChildrenArray returns the real array",
            "arr.castTo(\"array\");",
            "const a = arr.getAllChildrenArray();",
            "const deep = eventsFunctionContext.getArgument(\"deep\");",
            "",
            "for (let i = 0; i < a.length; i++)",
            "    if (a[i].getType() === \"array\") {",
            "        const b = a[i].getAllChildrenArray();",
            "        // At the position of the array (i), remove 1 element (the array), ",
            "        // and insert elements of b (the contents of the array) in-place of the array.",
            "        a.splice(i, 1, ...b);",
            "        // Skip over the elements that were just added as we are flattening only 1 level deep ",
            "        if(!deep) i += b.length;",
            "        // If deep, the current element has been replaced with another, we need to recheck it on next iteration.",
            "        // If not deep, the current element is now the one after the array elements and needs to be checked too.",
            "        // In both case, decreasing by 1 is necessary.",
            "        i--;",
            "    }",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The array to flatten",
          "name": "arr",
          "type": "string"
        },
        {
          "description": "Deeply flatten",
          "longDescription": "If yes, will continue flattening until there is no arrays in the array anymore.",
          "name": "deep",
          "type": "yesorno"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Removes the last array child of an array, and stores it in another variable.",
      "fullName": "Pop array child",
      "functionType": "Action",
      "name": "Pop",
      "sentence": "Remove last child of _PARAM1_ and store it in _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "// Cast to array to ensure getAllChildrenArray returns the real array",
            "arr.castTo(\"array\");",
            "const popvar = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"popvar\"));",
            "",
            "gdjs.Variable.copy(arr.getAllChildrenArray().pop(), popvar, false);",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The array to pop a child from",
          "name": "arr",
          "type": "string"
        },
        {
          "description": "The variable to store the popped value into",
          "name": "popvar",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Removes the first array child of an array, and stores it in another variable.",
      "fullName": "Shift array child",
      "functionType": "Action",
      "name": "Shift",
      "sentence": "Remove first child of _PARAM1_ and store it in _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "// Cast to array to ensure getAllChildrenArray returns the real array",
            "arr.castTo(\"array\");",
            "const shiftvar = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"shiftvar\"));",
            "",
            "gdjs.Variable.copy(arr.getAllChildrenArray().shift(), shiftvar, false);",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The array to shift a child from",
          "name": "arr",
          "type": "string"
        },
        {
          "description": "The variable to store the shifted value into",
          "name": "shiftvar",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Insert a variable at a specific index of an array.",
      "fullName": "Insert variable at",
      "functionType": "Action",
      "name": "InsertAt",
      "sentence": "Insert variable _PARAM3_ in _PARAM1_ at index _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));\r",
            "// Cast to array to ensure getAllChildrenArray returns the real array\r",
            "arr.castTo(\"array\");\r",
            "const variable = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"variable\"));\r",
            "\r",
            "arr.getAllChildrenArray().splice(eventsFunctionContext.getArgument(\"index\"), 0, variable.clone());\r",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The array to insert a variable in",
          "name": "arr",
          "type": "string"
        },
        {
          "description": "The index to insert the variable at",
          "name": "index",
          "type": "expression"
        },
        {
          "description": "The name of the variable to insert",
          "name": "variable",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Split a string into an array of strings via a separator.",
      "fullName": "Split string into array",
      "functionType": "Action",
      "name": "SplitString",
      "sentence": "Split string _PARAM1_ via separator _PARAM2_ into array _PARAM3_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));",
            "const str = eventsFunctionContext.getArgument(\"str\");",
            "const sep = eventsFunctionContext.getArgument(\"sep\");",
            "",
            "// Ensure the target is a clean new array",
            "arr.castTo(\"array\");",
            "arr.clearChildren();",
            "",
            "for (const string of str.split(sep)) ",
            "    arr.pushValue(string);",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The string to split",
          "name": "str",
          "type": "string"
        },
        {
          "description": "The separator to use to split the string",
          "longDescription": "For example, if you have a string \"Hello World\", and the separator is a space (\" \"), the resulting array would be [\"Hello\", \"World\"]. If the separator is an empty string (\"\"), it will make an element per character ([\"H\", \"e\", \"l\", \"l\", \"o\", \" \", \"W\", \"o\", \"r\", \"l\", \"d\"]).",
          "name": "sep",
          "type": "string"
        },
        {
          "description": "The name of the variable where to store the array",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Returns a string made from all strings in an array.",
      "fullName": "Join all elements of an array together into a string",
      "functionType": "StringExpression",
      "name": "Join",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"));\r",
            "const sep = eventsFunctionContext.getArgument(\"sep\");\r",
            "\r",
            "eventsFunctionContext.returnValue = arr\r",
            "    .getAllChildrenArray()\r",
            "    .reduce((accumulator, current) => accumulator + sep + current.getAsString(), \"\")\r",
            "    // Remove first separator as it should be only between the strings\r",
            "    .slice(sep.length);\r",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [
        {
          "description": "The name of the array to join into a string",
          "name": "arr",
          "type": "string"
        },
        {
          "description": "Optional separator text between each element",
          "name": "sep",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Get the sum of all numbers in an array.",
      "fullName": "Sum of array children",
      "functionType": "Expression",
      "name": "Sum",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "eventsFunctionContext.returnValue = runtimeScene",
            "    .getVariables()",
            "    .get(eventsFunctionContext.getArgument(\"arr\"))",
            "    .getAllChildrenArray()",
            "    .reduce((accumulator, current) => accumulator + current.getAsNumber(), 0);",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The name of the array",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Gets the smallest number in an array.",
      "fullName": "Smallest value",
      "functionType": "Expression",
      "name": "Min",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\")).getAllChildrenArray();\r",
            "\r",
            "let min = arr[0].getAsNumber();\r",
            "for (let i = 1; i < arr.length; i++) {\r",
            "    const num = arr[i].getAsNumber();\r",
            "    if (num < min) min = num;\r",
            "}\r",
            "\r",
            "eventsFunctionContext.returnValue = min;\r",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The array",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Gets the biggest number in an array.",
      "fullName": "Biggest value",
      "functionType": "Expression",
      "name": "Max",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\")).getAllChildrenArray();\r",
            "\r",
            "let max = arr[0].getAsNumber();\r",
            "for (let i = 1; i < arr.length; i++) {\r",
            "    const num = arr[i].getAsNumber();\r",
            "    if (num > max) max = num;\r",
            "}\r",
            "\r",
            "eventsFunctionContext.returnValue = max;\r",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The array",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Gets the average number in an array.",
      "fullName": "Average value",
      "functionType": "Expression",
      "name": "Mean",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\")).getAllChildrenArray();\r",
            "eventsFunctionContext.returnValue =\r",
            "    arr.reduce((accumulator, current) => accumulator + current.getAsNumber(), 0) / arr.length;\r",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The array",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Gets the median number in an array.",
      "fullName": "Median value",
      "functionType": "Expression",
      "name": "Median",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "ArrayTools::Slice"
              },
              "parameters": [
                "",
                "GetArgumentAsString(\"arr\")",
                "\"__ArrayTools_tmp\"",
                "0",
                "0",
                ""
              ]
            },
            {
              "type": {
                "value": "ArrayTools::Sort"
              },
              "parameters": [
                "",
                "\"__ArrayTools_tmp\"",
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(\"__ArrayTools_tmp\").getAllChildrenArray();\r",
            "const i = arr.length / 2;\r",
            "eventsFunctionContext.returnValue = \r",
            "    i % 1 == 0 \r",
            "        ? (arr[i - 1].getAsNumber() + arr[i].getAsNumber()) / 2 \r",
            "        : arr[Math.floor(i)].getAsNumber();\r",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The array",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Sort an array of number from smallest to biggest.",
      "fullName": "Sort an array",
      "functionType": "Action",
      "name": "Sort",
      "sentence": "Sort array _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const arr = runtimeScene.getVariables().get(eventsFunctionContext.getArgument(\"arr\"))",
            "// Cast to array to ensure getAllChildrenArray returns the real array",
            "arr.castTo(\"array\");",
            "",
            "arr.getAllChildrenArray()",
            "    .sort((a, b) => {",
            "        const na = a.getAsNumber();",
            "        const nb = b.getAsNumber();",
            "        return na < nb ? -1 : na > nb ? 1 : 0;",
            "    });",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [
        {
          "description": "The array to sort",
          "name": "arr",
          "type": "string"
        }
      ],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [],
  "eventsBasedObjects": []
}